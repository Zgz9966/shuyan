(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{160:function(e,a,t){"use strict";t.r(a);t(79);var r,n=t(74),i=t.n(n),c=(t(174),t(33),t(7)),s=t.n(c),l=t(0),o=t.n(l),h=t(162),m=t(413),d=t(249),g=t.n(d),u=t(166),_=t.n(u),p=(t(248),t(35),r="object",function(e){return Object.prototype.toString.call(e).toString()==="[object "+r+"]"});function v(e,a,t){var r,n,i,c,s,l,o=0,h=!1,m=!1,d=!0,g=!a&&0!==a&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");function u(a){var t=r,i=n;return r=n=void 0,o=a,c=e.apply(i,t)}function _(e,a){return g?window.requestAnimationFrame(e):setTimeout(e,a)}function v(e){var t=e-l;return void 0===l||t>=a||t<0||m&&e-o>=i}function E(){var e=Date.now();if(v(e))return f(e);s=_(E,function(e){var t=e-o,r=a-(e-l);return m?Math.min(r,i-t):r}(e))}function f(e){return s=void 0,d&&r?u(e):(r=n=void 0,c)}function y(){for(var e=Date.now(),t=v(e),i=arguments.length,d=new Array(i),g=0;g<i;g++)d[g]=arguments[g];if(r=d,n=this,l=e,t){if(void 0===s)return function(e){return o=e,s=_(E,a),h?u(e):c}(l);if(m)return s=_(E,a),u(l)}return void 0===s&&(s=_(E,a)),c}return a=+a||0,p(t)&&(h=!!t.leading,i=(m="maxWait"in t)?Math.max(+t.maxWait||0,a):i,d="trailing"in t?!!t.trailing:d),y.cancel=function(){void 0!==s&&function(e){if(g)return window.cancelAnimationFrame(e);clearTimeout(e)}(s),o=0,r=l=n=s=void 0},y.flush=function(){return void 0===s?c:f(Date.now())},y.pending=function(){return void 0!==s},y}t(78),t(36);var E={parse:function(e){var a=e.replace(/^\?/,""),t=a.split("&"),r={};return a?(t.forEach(function(e){var a=e.split("="),t=a[0],n=a[1];r[t]=decodeURIComponent(n)}),r):{}},stringify:function(e){var a=[];for(var t in e)a.push(t+"="+encodeURIComponent(""+e[t]));return a.join("&")}},f=t(172),y=t(4),b=t.n(y),x=(t(411),function(e){function a(){return e.apply(this,arguments)||this}return s()(a,e),a.prototype.render=function(){var e=this.props,a=(e.style,e.className,e.loading),t=i()(e,["style","className","loading"]);return o.a.createElement("div",{className:"search"},o.a.createElement("input",t),a&&o.a.createElement("div",{className:"search__loading-line"}))},a}(l.PureComponent));x.propTypes={loading:b.a.bool},x.defaultProps={};var N=x,S=t(167),w=t(198),T=t(187),P=(t(412),g()("TXQKAK5KW8","5b8967322688fb3aeded36d82056e001")),A=P.initIndex("posts"),I=P.initIndex("author"),O=P.initIndex("tag"),k=P.initIndex("series"),j={POSTS:"posts",AUTHORS:"authors",TAGS:"tags",SERIES:"series"},C=function(e){function a(a){var t;(t=e.call(this,a)||this)._handleTabChange=function(e){var a,r=t.state,n=r.searchVal,i=r.params;Object(h.c)("/search?q="+n+"&ab="+e.value+"&page=0"),t.setState(((a={activeTab:e.value,loading:!0})[e.value]=[],a.params=Object.assign({},i,{page:0}),a),function(){return t._searchByAlgolia()})},t._handlePrevPage=function(){var e,a=t.state,r=a.activeTab,n=a.params;t.setState(((e={loading:!0})[r]=[],e.params=Object.assign({},n,{page:parseInt(n.page||"0")-1}),e),function(){return t._searchByAlgolia()})},t._handleNextPage=function(){var e,a=t.state,r=a.activeTab,n=a.params;t.setState(((e={loading:!0})[r]=[],e.params=Object.assign({},n,{page:parseInt(n.page||"0")+1}),e),function(){return t._searchByAlgolia()})},t._handleSearchChange=function(e){t.setState({searchVal:e.target.value,loading:!0},function(){return t._searchByAlgolia()})},t._renderPosts=function(){var e=t.state,a=e.loading,r=e.posts;return o.a.createElement("div",{className:"search-page__posts"},a&&t._renderLoading({width:800,height:383,children:o.a.createElement(o.a.Fragment,null,o.a.createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"800",height:"220"}),o.a.createElement("rect",{x:"0",y:"241",rx:"3",ry:"3",width:"700",height:"32"}),o.a.createElement("rect",{x:"0",y:"289",rx:"3",ry:"3",width:"800",height:"16"}),o.a.createElement("rect",{x:"0",y:"313",rx:"3",ry:"3",width:"450",height:"16"}),o.a.createElement("rect",{x:"0",y:"345",rx:"3",ry:"3",width:"40",height:"18"}),o.a.createElement("rect",{x:"720",y:"345",rx:"3",ry:"3",width:"80",height:"18"}))}),0===r.length&&t._renderEmpty(),r.map(function(e){return o.a.createElement("div",{className:"search-page__post",key:e.objectID},o.a.createElement(w.a,{to:e.slug},o.a.createElement("div",{className:"search-page__post__cover"},o.a.createElement("div",{style:{backgroundImage:"url("+e.cover+")"}})),o.a.createElement("div",{className:"search-page__post__title"},e.title),o.a.createElement("div",{className:"search-page__post__excerpt"},e.excerpt)),o.a.createElement("div",{className:"search-page__post__footer"},o.a.createElement("div",{className:"date"},e.date),o.a.createElement("div",{className:"ttr"},e.timeToRead," min read")))}),t._renderPagination())},t._renderSeries=function(){var e=t.state,a=e.loading,r=e.series;return o.a.createElement("div",{className:"search-page__series"},a&&t._renderLoading({width:800,height:160,children:o.a.createElement(o.a.Fragment,null,o.a.createElement("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"120",height:"160"}),o.a.createElement("rect",{x:"140",y:"21",rx:"3",ry:"3",width:"300",height:"32"}),o.a.createElement("rect",{x:"140",y:"102",rx:"3",ry:"3",width:"660",height:"20"}),o.a.createElement("rect",{x:"140",y:"126",rx:"3",ry:"3",width:"400",height:"20"}))}),0===r.length&&t._renderEmpty(),r.map(function(e){return o.a.createElement("div",{className:"search-page__series-item",key:e.objectID},o.a.createElement(w.a,{to:e.slug},o.a.createElement("div",{className:"search-page__series-item__cover"},o.a.createElement("div",{style:{backgroundImage:"url("+e.cover+")"}})),o.a.createElement("div",{className:"search-page__series-item__content"},o.a.createElement("div",{className:"search-page__series-item__title"},e.name),o.a.createElement("div",{className:"search-page__series-item__desc"},e.description))))}),t._renderPagination())},t._renderAuthors=function(){var e=t.state,a=e.loading,r=e.authors;return o.a.createElement("div",{className:"search-page__authors"},a&&t._renderLoading({width:800,height:120,children:o.a.createElement(o.a.Fragment,null,o.a.createElement("rect",{x:"0",y:"0",rx:"60",ry:"60",width:"120",height:"120"}),o.a.createElement("rect",{x:"140",y:"21",rx:"3",ry:"3",width:"300",height:"32"}),o.a.createElement("rect",{x:"140",y:"86",rx:"3",ry:"3",width:"500",height:"20"}))}),0===r.length&&t._renderEmpty(),r.map(function(e){return o.a.createElement("div",{className:"search-page__author-item",key:e.objectID},o.a.createElement(w.a,{to:e.slug},o.a.createElement("div",{className:"search-page__author-item__cover"},o.a.createElement("div",{style:{backgroundImage:"url("+e.avatar+")"}})),o.a.createElement("div",{className:"search-page__author-item__content"},o.a.createElement("div",{className:"search-page__author-item__nickname"},e.nickname),o.a.createElement("div",{className:"search-page__author-item__slogan"},e.slogan))))}),t._renderPagination())},t._renderTags=function(){var e=t.state.tags;return o.a.createElement("div",{className:"search-page__tags"},t._renderLoading({width:800,height:120,children:o.a.createElement(o.a.Fragment,null,o.a.createElement("rect",{x:"0",y:"0",rx:"60",ry:"60",width:"120",height:"120"}),o.a.createElement("rect",{x:"140",y:"21",rx:"3",ry:"3",width:"300",height:"32"}),o.a.createElement("rect",{x:"140",y:"86",rx:"3",ry:"3",width:"500",height:"20"}))}),0===e.length&&t._renderEmpty(),e.map(function(e){return o.a.createElement("div",{className:"search-page__tag-item",key:e.objectID},o.a.createElement(w.a,{to:e.slug},o.a.createElement("div",{className:"search-page__tag-item__cover"},o.a.createElement("div",{style:{backgroundImage:"url("+e.cover+")"}})),o.a.createElement("div",{className:"search-page__tag-item__content"},o.a.createElement("div",{className:"search-page__tag-item__name"},e.name),o.a.createElement("div",{className:"search-page__tag-item__desc"},e.description))))}),t._renderPagination())},t._renderLoading=function(e){var a=e.children,r=i()(e,["children"]);return t.state.loading&&o.a.createElement(T.c.Consumer,null,function(e){return o.a.createElement(m.a,Object.assign({},r,{primaryColor:"light"===e?"#f7f7f7":"#777777",secondaryColor:"light"===e?"#fafafa":"#828282"}),a)})},t._renderEmpty=function(){return!t.state.loading&&o.a.createElement("div",{className:"search-page__placeholder"},"Empty")},t._renderPagination=function(){var e=t.state,a=e.loading,r=e.pagination;return!a&&o.a.createElement(S.a,Object.assign({},r,{onPrev:t._handlePrevPage,onNext:t._handleNextPage}))};var r=E.parse(t.props.location.search),n=r.q,c=r.ab,s=i()(r,["q","ab"]);return t.state={params:s,persist:!n,loading:!!n,searchVal:n||"",activeTab:c||j.POSTS,tabs:[{label:"Posts",value:j.POSTS},{label:"Series",value:j.SERIES},{label:"Authors",value:j.AUTHORS},{label:"Tags",value:j.TAGS}],posts:[],authors:[],tags:[],series:[],pagination:{}},t._searchByAlgolia=v(t._searchByAlgolia,1e3),t}s()(a,e);var t=a.prototype;return t.componentDidMount=function(){this.state.persist||this._searchByAlgolia()},t._searchByAlgolia=function(){var e,a=this,t=this.state,r=t.activeTab,n=t.searchVal,i=t.params,c=Object.assign({},i,{query:n,hitsPerPage:10}),s=null;if(n){if(r===j.POSTS)s=A;else if(r===j.SERIES)s=k;else if(r===j.AUTHORS)s=I;else{if(r!==j.TAGS)return;s=O}this.setState(((e={loading:!0})[r]=[],e)),s.search(c,function(e,t){var i;if(e)return a.setState({loading:!1}),void window.alert("Occur an error, please try again!");var c=t.nbPages,s=t.page,l=c>s+1&&s+1,o=0<=s-1&&s-1;a.setState(((i={persist:!1,loading:!1})[r]=t.hits||[],i.pagination={curr:s,prev:"number"==typeof o&&"/search?q="+n+"&tab="+r+"&page="+o,next:"number"==typeof l&&"/search?q="+n+"&tab="+r+"&page="+l},i))})}else this.setState({loading:!1})},t.render=function(){var e=this,a=this.state,t=a.persist,r=a.loading,n=a.searchVal,i=a.tabs,c=a.activeTab;return o.a.createElement(f.a,{className:"search-page"},o.a.createElement("div",{className:"search-page__content"},o.a.createElement("div",{className:"search-page__search"},o.a.createElement(N,{loading:r,value:n,placeholder:"Search Blog",onChange:this._handleSearchChange})),!t&&o.a.createElement("div",{className:"search-page__result"},o.a.createElement("div",{className:"search-page__tabs"},i.map(function(a){return o.a.createElement("div",{className:_()(["search-page__tab",c===a.value&&"search-page__tab--active"]),key:a.value,onClick:function(){return e._handleTabChange(a)}},a.label)})),o.a.createElement("div",{className:"search-page__list"},c===j.POSTS&&this._renderPosts(),c===j.SERIES&&this._renderSeries(),c===j.AUTHORS&&this._renderAuthors(),c===j.TAGS&&this._renderTags()))))},a}(l.PureComponent);a.default=C},167:function(e,a,t){"use strict";var r=t(0),n=t.n(r),i=t(162);t(183),a.a=function(e){var a=e.next,t=e.prev,r=e.onPrev,c=e.onNext;return(t||a)&&n.a.createElement("div",{className:"pagination"},n.a.createElement("div",{className:"pagination__prev"},t&&n.a.createElement(i.a,{to:t,onClick:r},"PREV")),n.a.createElement("div",{className:"pagination__next"},a&&n.a.createElement(i.a,{to:a,onClick:c},"NEXT")))}}}]);
//# sourceMappingURL=component---src-pages-search-js-0b1de8045a9f87177687.js.map